#!/usr/bin/envspacebashPLY#统计指定ip:port下数据库中表格名字.PLY#usage：PLY#TABTABbashspacecountDbTables.shspaceip1spaceport1spaceip2spaceport2spaceip3spaceport3spacePLYPLYPLYIFS=$'space\t\n'PLYPLYwhilespacetestspace$#space-gespace2PLYdoPLYTABforspaceispaceinspace$(mysqlspace-upgmspace-ppgmfetionspace-hspace$1space-Pspace$2space-espace"SELECTspace\`SCHEMA_NAME\`spacespaceFROMspace\`information_schema\`.\`SCHEMATA\`"space|spaceegrepspace-vspace'+-|SCHEMA_NAME')PLYTABdoPLYTABTABmysqlspace-upgmspace-ppgmfetionspace-hspace$1space-Pspace$2space-espacespace"SELECTspaceTABLE_NAMEspaceFROMspaceINFORMATION_SCHEMA.TABLESspaceWHEREspaceTABLE_SCHEMAspace=space\"${i}\""space|spaceegrepspace-vspace'+-|TABLE_NAME'space|spaceawkspace-vspaceip=$1space-vspaceport=$2space-vspacedb=$ispace'BEGIN{printspaceip,port,db}{printf("\t\t%s\n",$0);}'PLYTABdonePLYTABshiftspace2PLYdonePLY
